import{once as t}from"events";import{Worker as e}from"worker_threads";import{URL as r,pathToFileURL as n}from"url";import o from"callsites";const s=Object.freeze(["--experimental-import-meta-resolve"]);const a=/^\w+:\/\/.+/;const c=import.meta.url;const i=p(u);async function m(t,e){e??(e=l());const[r]=await f([t],e);return r}async function f(r,n){n??(n=l());const o={parent:n,specifiers:r};const a={execArgv:s,workerData:o};const c=new e(i,a);try{const[e]=await t(c,"message");return e}catch(t){const{message:e,name:r}=Object(t);throw Object.assign(new Error(e),{name:r})}finally{void c.terminate()}}function p(t){const e=t.toString();const n=e.slice(e.indexOf("{")+1,e.lastIndexOf("}")).trim();return new r(`data:text/javascript,${n}`)}function l(){for(const t of o()){const e=t.getFileName();if(e){const t=a.test(e)?e:n(e).href;if(t!==c){return t}}}return undefined}async function u(){const{parentPort:t,workerData:e}=await import("worker_threads");const{parent:r,specifiers:n}=e;const o=await Promise.all(n.map((t=>import.meta.resolve(t,r))));t.postMessage(o)}export{m as importMetaResolve,f as importMetaResolveAll};
//# sourceMappingURL=index.mjs.map
